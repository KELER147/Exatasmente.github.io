let questions = [
    {
        numb: 1,
        question: "(ENEM 2017) Para fazer um levantamento sobre o consumo diário de energia elétrica dos moradores de um bairro, um pesquisador aplicou um questionário a 25 moradores e obteve as seguintes respostas, em kWh: 4, 8, 3, 7, 5, 10, 4, 5, 6, 7, 5, 4, 6, 7, 5, 9, 4, 5, 8, 7, 6, 8, 5, 6, 4: A mediana do consumo diário de energia elétrica, em kWh, é: ",
        answer: "C. 6",
        options: [
            "A. 4",
            "B. 5",
            "C. 6",
            "D. 7"

        ]
    },
    {
        numb: 2,
        question: "(ENEM 2015) Um recipiente possui 1 litro de solução aquosa de uma substância naconcentraçãode3mg/mL.Ovolumedesolução que deve ser retirado desse recipiente para obter uma quantidade de 60 mg de substância é:",
        answer: "C. 20 mL",
        options: [
            "A. 10 mL",
            "B. 15 mL",
            "C. 20 mL",
            "D. 25 mL"
        ]
    },
    {
        numb: 3,
        question: "(ENEM 2018)Uma empresa de telefonia oferece dois planos aos seus clientes. No plano A, o cliente paga uma mensalidade fixa de R$ 30,00 e mais R$ 0,50 por minuto de ligação. No plano B, o cliente paga uma mensalidade fixa de R$ 45,00 e mais R$ 0,30 por minuto de ligação. A partir de quantos minutos de ligação o plano B passa a ser mais vantajoso que o plano A?",
        answer: "A. 75 minutos",
        options: [
            "A. 75 minutos",
            "B. 100 minutos",
            "C. 150 minutos",
            "D. 50 minutos"
        ]
    },
    {
        numb: 4,
        question: "(ENEM 2016)Um atleta deseja calcular a distância que percorre em seus treinos diários. Ele dá uma volta completa em uma pista circular de 400 metros de comprimento. Se ele correr 10 voltas completas, a distância total percorrida será:",
        answer: "C. 4 km",
        options: [
            "A. 2 km",
            "B. 3 km",
            "C. 4 km",
            "D. 5 km"
        ]
    },
    {
        numb: 5,
        question: "(ENEM 2019)Considere a função f(x) = 2x^2 - 8x + 6. O valor mínimo de f(x) é:",
        answer: "A. -2",
        options: [
            "A. -2",
            "B. 0",
            "C. 2",
            "D. 6"
        ]
    },
    {
        numb: 6,
        question: "(ENEM 2014) Para pintar as paredes e o teto de um quarto de 4 metros de largura, 5 metros de comprimento e 3 metros de altura, utilizando-se uma lata de tinta que cobre 10 metros quadrados por litro, a quantidade mínima de tinta, em litros, necessária será: ",
        answer: "B. 7 litros",
        options: [
            "A. 6 litros",
            "B. 7 litros",
            "C. 8 litros",
            "D. 9 litros"
        ]
    },
    {
        numb: 7,
        question: "(ENEM 2013) Em uma cidade, os táxis cobram uma tarifa fixa de R$ 5,00 mais R$ 2,00 por quilômetro percorrido. Se um passageiro dispõe de R$ 25,00 para uma corrida, a maior distância que ele pode percorrer, em quilômetros, é:",
        answer: "C. 6",
        options: [
            "A. 8 km",
            "B. 9 km",
            "C. 10 km",
            "D. 11 km"
        ]
    },
    {
        numb: 8,
        question: "(ENEM 2018) O número de diagonais de um polígono de 20 lados é:",
        answer: "A. 170",
        options: [
            "A. 170",
            "B. 180",
            "C. 190",
            "D. 200"
        ]
    },
    {
        numb: 9,
        question: "(ENEM 2017) Uma caixa d'água tem o formato de um cilindro reto com raio da base igual a 1,5 metros e altura igual a 2 metros. A capacidade máxima dessa caixa, em litros, é (considerando π = 3):  ",
        answer: "A. 13.500",
        options: [
            "A. 13.500",
            "B. 9.000",
            "C. 7.500",
            "D. 4.500"
        ]
    },
    {
        numb: 10,
        question: "(ENEM 2015) Para ir de uma cidade A a uma cidade B, um ciclista tem duas opções de percurso. O primeiro percurso tem 45 km, enquanto o segundo é 20% mais longo. Qual é o comprimento do segundo percurso?",
        answer: "B. 54 km",
        options: [
            "A. 50 km",
            "B. 54 km",
            "C. 58 km",
            "D. 60 km"
        ]
    },
    {
        numb: 11,
        question: "(ENEM 2016)Um reservatório tem a forma de um paralelepípedo retângulo com dimensões internas de 2 metros de largura, 3 metros de comprimento e 1,5 metros de altura. Se ele estiver completamente cheio, o volume de água armazenado, em litros, será:",
        answer: "A. 9.000",
        options: [
            "A. 9.000",
            "B. 8.500",
            "C. 7.500",
            "D. 6.000"
        ]
    },
    {
        numb: 12,
        question: "(ENEM 2018)Uma pessoa investiu R$ 1.000,00 em uma aplicação que rende 1% ao mês. Após 6 meses, o valor acumulado pela aplicação será:",
        answer: "A. R$ 1.061,52",
        options: [
            "A. R$ 1.061,52",
            "B. R$ 1.061,56",
            "C. R$ 1.061,68",
            "D. R$ 1.061,78"
        ]
    },
    {
        numb: 13,
        question: "(ENEM 2017) Seja a função f(x) = 3x^3 - 9x + 5. O valor de f(2) é: ",
        answer: "C. 11",
        options: [
            "A. 5",
            "B. 7",
            "C. 11",
            "D. 17"
        ]
    },
    {
        numb: 14,
        question: "(ENEM 2016) Um triângulo equilátero tem lado igual a 6 cm. A altura desse triângulo é:",
        answer: "A. 3√3 cm",
        options: [
            "A. 3√3 cm",
            "B. 4√3 cm",
            "C. 5√3 cm",
            "D. 6√3 cm"
        ]
    },
    {
        numb: 15,
        question: "(ENEM 2019) O valor de log₂(32) é:",
        answer: "B. 5",
        options: [
            "A. 4",
            "B. 5",
            "C. 6",
            "D. 7"
        ]
    },
    {
        numb: 16,
        question: "(ENEM 2018) A função f(x) = -2x² + 8x - 6 possui um valor máximo igual a:",
        answer: "D. 6",
        options: [
            "A. -1",
            "B. 2",
            "C. 4",
            "D. 6"
        ]
    },
    {
        numb: 17,
        question: "(ENEM 2015) O número 12345 escrito na base 2 é:",
        answer: "C. 11000001111001₂",
        options: [
            "A. 11000000111001₂",
            "B. 11000001011001₂",
            "C. 11000001111001₂",
            "D. 11000010011001₂"
        ]
    },
    {
        numb: 18,
        question: "(ENEM 2016) Seja f(x) = 2x + 3. A função inversa de f(x) é:",
        answer: "A. f⁻¹(x) = (x - 3)/24",
        options: [
            "A. f⁻¹(x) = (x - 3)/24",
            "B. f⁻¹(x) = 2x - 3",
            "C. f⁻¹(x) = (x + 3)/2",
            "D. f⁻¹(x) = (2x + 3)/2"
        ]
    },
    {
        numb: 19,
        question: "(ENEM 2017) Sejam A e B dois números tais que A = 3 + 2√2 e B = 3 - 2√2. O valor de A * B é:",
        answer: "C. 5",
        options: [
            "A. 1",
            "B. 3",
            "C. 5",
            "D. 7"
        ]
    },
    {
        numb: 20,
        question: "(ENEM 2018) Uma loja vende uma camisa por R$ 40,00. Se o vendedor aplicar um desconto de 15%, o novo preço será:",
        answer: "A. R$ 34,00",
        options: [
            "A. R$ 34,00",
            "B. R$ 35,00",
            "C. R$ 36,00",
            "D. R$ 37,00"
        ]
    },
    {
        numb: 21,
        question: "(ENEM 2019) Um terreno tem a forma de um trapézio isósceles com bases de 10 metros e 20 metros e altura de 6 metros. A área desse terreno é:",
        answer: "A. 90 m²",
        options: [
            "A. 90 m²",
            "B. 75 m²",
            "C. 60 m²",
            "D. 50 m²"
        ]
    },
    {
        numb: 22,
        question: "(Enem 2020) Uma torneira está gotejando água em um balde com capacidade de 18 litros. No instante atual, o balde se encontra com ocupação de 50% de sua capacidade. torneira, e uma gota é formada, em média, por 5 × 10 − 2 mL de água. Quanto tempo, em hora, será necessário para encher completamente o balde, partindo do instante atual?",
        answer: "B. 1 × 10¹",
        options: [
            "A. 2 × 10¹",
            "B. 1 × 10¹",
            "C. 2 × 10-²",
            "D. 1 × 10-²"
        ]
    },
    {
        numb: 23,
        question: "(ENEM 2017)Uma empresa deseja comprar 50 notebooks para seus funcionários. A loja A vende cada notebook por R$ 2.000,00 à vista ou R$ 2.200,00 em duas parcelas iguais. A loja B vende cada notebook por R$ 2.100,00 à vista ou R$ 2.300,00 em três parcelas iguais. Considerando-se apenas o preço à vista, quanto a empresa economizará comprando na loja A?",
        answer: "D. R$ 20.000,00",
        options: [
            "A. R$ 4.000,00",
            "B. R$ 5.000,00",
            "C. R$ 10.000,00",
            "D. R$ 20.000,00"
        ]
    },
    {
        numb: 24,
        question: "(Enem 2020) Uma das Sete Maravilhas do Mundo Moderno é o Templo de Kukulkán, localizado na cidade de Chichén Itzá, no México. Geometricamente, esse templo pode ser representado por um tronco reto de pirâmide de base quadrada.As quantidades de cada tipo de figura plana que formam esse tronco de pirâmide são)",
        answer: "C. 2 quadrados e 4 trapézios isósceles.",
        options: [
            "A. 2 quadrados e 4 retângulos.",
            "B. 1 retângulo e 4 triângulos isósceles.",
            "C. 2 quadrados e 4 trapézios isósceles.",
            "D. 1 quadrado, 3 retângulos e 2 trapézios retângulos."
        ]
    },
    {
        numb: 25,
        question: "Um estudante de arquitetura projetou um prédio de 32 m de altura a ser construído em uma maquete, em papel-cartão, na escala 1 : 50. Nesse caso, na maquete, a altura do prédio mede)",
        answer: "C. 0,64 m.",
        options: [
            "A. 0,32 m.",
            "B. 0,50 m.",
            "C. 0,64 m.",
            "D. 1,00 m."
        ]
    }
];

let selectedQuestions = [];
let questionCount = 0;
let userScore = 0;
let optionSelectedFlag = false;

document.addEventListener('DOMContentLoaded', function() {
    let nextBtn = document.querySelector('.next-btn');
    let optionList = document.querySelector('.option-list');
    let pontuaçãoBtn = document.querySelector('.Pontuação-btn');
    let novamenteBtn = document.querySelector('.Novamente-btn');
    let questionNumb = 1;

    // Função para sortear 5 perguntas aleatórias
    function getRandomQuestions() {
        let shuffled = questions.sort(() => 0.25 - Math.random());
        return shuffled.slice(0, 5);
    }

    // Inicializa o quiz com 5 perguntas aleatórias
    function initializeQuiz() {
        selectedQuestions = getRandomQuestions();
        userScore = 0;
        questionCount = 0;
        questionNumb = 1;
        headerScore();
        showQuestions(questionCount);
        questionCounter(questionNumb);
    }

    nextBtn.onclick = () => {
        if (optionSelectedFlag) {
            if (questionCount < selectedQuestions.length - 1) {
                questionCount++;
                questionNumb++;
                showQuestions(questionCount);
                questionCounter(questionNumb);
                optionSelectedFlag = false;
            } else {
                console.log('Question Completed');
                pontuaçãoBtn.classList.add('active');
                nextBtn.classList.remove('active');
                novamenteBtn.classList.add('active');
    
                // Adicionando a funcionalidade do alerta aqui
                var pontuação = userScore; // Supondo que pontuaçãoBtn seja a pontuação do quiz
                if (pontuação >= 3) {
                    alert(`Parabéns pelo o resultado. Sua pontuação é: ${userScore}`);
                } else {
                    alert(`Parabéns por tentar! Continue se esforçando. Sua pontuação é: ${userScore}`);
                }
            }
        }
    };
    

    function showQuestions(index) {
        const questionText = document.querySelector('.question-text');
        questionText.textContent = `${questionNumb}. ${selectedQuestions[index].question}`;
        let optionTag = `
            <div class="option"><span>${selectedQuestions[index].options[0]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[1]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[2]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[3]}</span></div>`;
        optionList.innerHTML = optionTag;

        const option = document.querySelectorAll('.option');
        for (let i = 0; i < option.length; i++) {
            option[i].addEventListener('click', () => {
                optionSelected(option[i]);
            });
        }

        nextBtn.classList.remove('active');
    }

    function questionCounter(index) {
        const questionTotal = document.querySelector('.question-total');
        questionTotal.textContent = `${index} de ${selectedQuestions.length} Questões`;
    }

    function headerScore() {
        const headerScoreText = document.querySelector('.header-score');
        headerScoreText.textContent = `PONTOS: ${userScore} / 5`;
    }

    function optionSelected(answer) {
        let userAnswer = answer.textContent;
        let correctAnswer = selectedQuestions[questionCount].answer;
        let allOptions = optionList.children.length;

        optionSelectedFlag = true;

        if (userAnswer == correctAnswer) {
            answer.classList.add('correct');
            userScore += 1;
            headerScore();
        } else {
            answer.classList.add('incorrect');
            for (let i = 0; i < allOptions; i++) {
                if (optionList.children[i].textContent == correctAnswer) {
                    optionList.children[i].setAttribute('class', 'option correct');
                }
            }
        }
        for (let i = 0; i < allOptions; i++) {
            optionList.children[i].classList.add('disabled');
            optionList.children[i].classList.add('no-pointer');
            optionList.children[i].removeEventListener('click', optionSelected);
        }
        nextBtn.classList.add('active');
    }

    const url = "index.html";

    function openInNewTab(url) {
        const win = window.open(url, '_blank');
        win.focus();
    }

    pontuaçãoBtn.addEventListener('click', () => {
        openInNewTab(url);
    });

    novamenteBtn.addEventListener('click', () => {
        initializeQuiz();
        pontuaçãoBtn.classList.remove('active');
        novamenteBtn.classList.remove('active');
        resultBox.classList.remove('active');
        quizSection.classList.add('active');
    });

    initializeQuiz();
});
