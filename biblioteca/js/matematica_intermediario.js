let questions = [
    {
        numb: 1,
        question: "Uma loja oferece um desconto de 15% em um produto que custa R$ 200,00. Após aplicar o desconto, a loja ainda adiciona um imposto de 10% sobre o valor descontado. Qual é o preço final do produto?",
        answer: "A. R$ 187,00",
        options: [
            "A. R$ 187,00",
            "B. R$ 198,00",
            "C. R$ 189,00",
            "D. R$ 191,70"
        ]
    },
    {
        numb: 2,
        question: "João precisa dividir um terreno de 480m² em partes iguais para construir três casas. Ele quer reservar 15% da área total para um jardim comum. Qual será a área destinada a cada casa?",
        answer: "B. 136m²",
        options: [
            "A. 120m²",
            "B. 136m²",
            "C. 136,8m²",
            "D. 150m²"
        ]
    },
    {
        numb: 3,
        question: "Uma máquina produz 50 peças por hora. Se 4 máquinas iguais trabalharem juntas por 6 horas, quantas peças serão produzidas ao final do período?",
        answer: "A. 1200",
        options: [
            "A. 1200",
            "B. 1300",
            "C. 1500",
            "D. 1600"
        ]
    },
    {
        numb: 4,
        question: "Durante uma liquidação, uma loja anunciou que seus produtos, inicialmente com preço de R$ 350,00, tiveram um desconto de 20%. Posteriormente, sobre o novo valor, foi aplicado mais um desconto de 10%. Qual o preço final do produto após ambos os descontos?",
        answer: "B. R$ 252,00",
        options: [
            "A. R$ 245,00",
            "B. R$ 252,00",
            "C. R$ 252,50",
            "D. R$ 315,00"
        ]
    },
    {
        numb: 5,
        question: "Uma piscina tem capacidade de 30.000 litros de água. Se uma bomba enche a piscina a uma taxa de 500 litros por hora, quanto tempo será necessário para encher 60% da piscina?",
        answer: "B. 36 horas",
        options: [
            "A. 30 horas",
            "B. 36 horas",
            "C. 25 horas",
            "D. 20 horas"
        ]
    },
    {
        numb: 6,
        question: "Uma empresa possui 90 funcionários. 40% deles são do departamento de vendas. Se a empresa decidir contratar mais 15 funcionários para o departamento de vendas, qual será o novo percentual de funcionários desse departamento em relação ao total de funcionários?",
        answer: "D. 46%",
        options: [
            "A. 41%",
            "B. 43%",
            "C. 45%",
            "D. 46%"
        ]
    },
    {
        numb: 7,
        question: "Um investidor aplica R$ 5.000,00 em um fundo que rende 1,5% ao mês. Após 6 meses, qual será o valor acumulado dessa aplicação?",
        answer: "A. R$ 5.457,94",
        options: [
            "A. R$ 5.457,94",
            "B. R$ 5.470,00",
            "C. R$ 5.450,00",
            "D. R$ 5.465,00"
        ]
    },
    {
        numb: 8,
        question: "Em uma fazenda, 15% dos 800 hectares são usados para cultivo de milho, e 25% do restante é usado para cultivo de soja. Quantos hectares são usados para o cultivo de soja?",
        answer: "B. 170",
        options: [
            "A. 150",
            "B. 170",
            "C. 200",
            "D. 680"
        ]
    },
    {
        numb: 9,
        question: "Maria comprou um vestido por R$ 120,00 e vendeu com um lucro de 25%. Ela decidiu investir esse lucro em um novo vestido, que custava R$ 100,00 com 10% de desconto. Qual o valor final investido por Maria no novo vestido?",
        answer: "B. R$ 90,00",
        options: [
            "A. R$ 87,50",
            "B. R$ 90,00",
            "C. R$ 92,50",
            "D. R$ 95,00"
        ]
    },
    {
        numb: 10,
        question: "Um tanque tem capacidade de 10.000 litros. Se 3 bombas iguais são usadas e cada uma delas bombeia 200 litros de água por hora, quanto tempo será necessário para encher 80% do tanque?",
        answer: "B. 13,33 horas",
        options: [
            "A. 12 horas",
            "B. 13,33 horas",
            "C. 15 horas",
            "D. 16,67 horas"
        ]
    },
    {
        numb: 11,
        question: "Uma empresa produz 250 unidades de um produto em 8 horas de trabalho. Se a empresa decidir aumentar a produção em 20%, quantas unidades ela produzirá em um dia de 8 horas de trabalho após o aumento?",
        answer: "B. 300",
        options: [
            "A. 275",
            "B. 300",
            "C. 310",
            "D. 320"
        ]
    },
    {
        numb: 12,
        question: "Um carro percorre 480 km consumindo 40 litros de gasolina. Qual é o consumo do carro em km por litro? Se o preço da gasolina é R$ 4,50 por litro, qual o custo da viagem de 480 km?",
        answer: "B. 12 km/L e R$ 180,00",
        options: [
            "A. 10 km/L e R$ 180,00",
            "B. 12 km/L e R$ 180,00",
            "C. 12 km/L e R$ 200,00",
            "D. 10 km/L e R$ 200,00"
        ]
    },
    {
        numb: 13,
        question: "Uma empresa de tecnologia tem 120 empregados e decide aumentar seu quadro de funcionários em 25%. Após a contratação, 20% dos novos funcionários são alocados para o setor de desenvolvimento. Quantos funcionários foram alocados para esse setor?",
        answer: "A. 24",
        options: [
            "A. 24",
            "B. 30",
            "C. 25",
            "D. 36"
        ]
    },
    {
        numb: 14,
        question: "Um terreno retangular tem 50 metros de comprimento e 30 metros de largura. O proprietário decide cercar o terreno e, em seguida, dividir a área em quatro partes iguais. Qual será o comprimento da cerca necessária e a área de cada parte?",
        answer: "A. 160 m e 375 m²",
        options: [
            "A. 160 m e 375 m²",
            "B. 160 m e 400 m²",
            "C. 160 m e 3750 m²",
            "D. 160 m e 3000 m²"
        ]
    },
    {
        numb: 15,
        question: "Pedro comprou um aparelho de som por R$ 800,00. Ele fez um pagamento inicial de 25% e o restante foi parcelado em 5 vezes iguais sem juros. Qual o valor de cada parcela?",
        answer: "A. R$ 120,00",
        options: [
            "A. R$ 120,00",
            "B. R$ 125,00",
            "C. R$ 150,00",
            "D. R$ 160,00"
        ]
    },
    {
        numb: 16,
        question: "Um investidor possui R$ 20.000,00 e decide aplicar metade desse valor em um fundo que rende 2% ao mês e a outra metade em um fundo que rende 1,5% ao mês. Qual será o valor total acumulado após 6 meses?",
        answer: "A. R$ 21.530,00",
        options: [
            "A. R$ 21.530,00",
            "B. R$ 21.525,75",
            "C. R$ 21.515,25",
            "D. R$ 21.520,50"
        ]
    },
    {
        numb: 17,
        question: "Um prédio possui 15 andares e cada andar tem 8 apartamentos. Se cada apartamento tem uma área de 100 m², qual é a área total do prédio?",
        answer: "A. 12.000 m²",
        options: [
            "A. 12.000 m²",
            "B. 11.500 m²",
            "C. 12.500 m²",
            "D. 11.000 m²"
        ]
    },
    {
        numb: 18,
        question: "Uma escola possui 1200 alunos. Se 5% dos alunos faltaram no primeiro dia de aula, quantos alunos compareceram às aulas nesse dia?",
        answer: "B. 1140",
        options: [
            "A. 1150",
            "B. 1140",
            "C. 1130",
            "D. 1160"
        ]
    },
    {
        numb: 19,
        question: "Um agricultor vendeu 3/5 de sua produção de laranjas. Se ele tinha 500 laranjas, quantas laranjas ele vendeu e quantas restaram?",
        answer: "C. Vendeu 300 e restaram 200",
        options: [
            "A. Vendeu 200 e restaram 300",
            "B. Vendeu 350 e restaram 150",
            "C. Vendeu 300 e restaram 200",
            "D. Vendeu 250 e restaram 250"
        ]
    },
    {
        numb: 20,
        question: "Uma fábrica produz 1200 peças em 5 dias. Se a produção for aumentada em 20%, quantas peças serão produzidas em 5 dias?",
        answer: "B. 1440",
        options: [
            "A. 1400",
            "B. 1440",
            "C. 1500",
            "D. 1600"
        ]
    },
        {
            numb: 21,
            question: "Carlos investiu R$ 10.000,00 em um fundo que rende 1% ao mês. Após 12 meses, qual será o valor total acumulado?",
            answer: "C. R$ 11.268,25",
            options: [
                "A. R$ 11.000,00",
                "B. R$ 11.200,00",
                "C. R$ 11.268,25",
                "D. R$ 11.500,00"
            ]
        },
        {
            numb: 22,
            question: "Um reservatório de água tem a forma de um cilindro com 5 metros de altura e raio da base de 2 metros. Qual é o volume do reservatório em metros cúbicos? (Use π ≈ 3,14)",
            answer: "B. 62,8 m³",
            options: [
                "A. 60 m³",
                "B. 62,8 m³",
                "C. 70 m³",
                "D. 75,4 m³"
            ]
        },
        {
            numb: 23,
            question: "Ana comprou uma geladeira por R$ 1.200,00 com um desconto de 10% à vista. Qual foi o valor pago por Ana?",
            answer: "B. R$ 1.080,00",
            options: [
                "A. R$ 1.100,00",
                "B. R$ 1.080,00",
                "C. R$ 1.090,00",
                "D. R$ 1.070,00"
            ]
        },
        {
            numb: 24,
            question: "Um corredor percorre 400 metros em 50 segundos. Qual é a sua velocidade média em metros por segundo?",
            answer: "A. 8 m/s",
            options: [
                "A. 8 m/s",
                "B. 7 m/s",
                "C. 6 m/s",
                "D. 9 m/s"
            ]
        },
        {
            numb: 25,
            question: "Uma padaria vende 300 pães por dia. Se cada pão custa R$ 0,50, qual é a receita diária da padaria?",
            answer: "B. R$ 150,00",
            options: [
                "A. R$ 140,00",
                "B. R$ 150,00",
                "C. R$ 160,00",
                "D. R$ 170,00"
            ]
        }
    ];
    

let selectedQuestions = [];
let questionCount = 0;
let userScore = 0;
let optionSelectedFlag = false;

document.addEventListener('DOMContentLoaded', function() {
    let nextBtn = document.querySelector('.next-btn');
    let optionList = document.querySelector('.option-list');
    let pontuaçãoBtn = document.querySelector('.Pontuação-btn');
    let novamenteBtn = document.querySelector('.Novamente-btn');
    let questionNumb = 1;

    // Função para sortear 5 perguntas aleatórias
    function getRandomQuestions() {
        let shuffled = questions.sort(() => 0.25 - Math.random());
        return shuffled.slice(0, 5);
    }

    // Inicializa o quiz com 5 perguntas aleatórias
    function initializeQuiz() {
        selectedQuestions = getRandomQuestions();
        userScore = 0;
        questionCount = 0;
        questionNumb = 1;
        headerScore();
        showQuestions(questionCount);
        questionCounter(questionNumb);
    }

 
    nextBtn.onclick = () => {
        if (optionSelectedFlag) {
            if (questionCount < selectedQuestions.length - 1) {
                questionCount++;
                questionNumb++;
                showQuestions(questionCount);
                questionCounter(questionNumb);
                optionSelectedFlag = false;
            } else {
                console.log('Question Completed');
                pontuaçãoBtn.classList.add('active');
                nextBtn.classList.remove('active');
                novamenteBtn.classList.add('active');
    
                // Adicionando a funcionalidade do alerta aqui
                var pontuação = userScore; // Supondo que pontuaçãoBtn seja a pontuação do quiz
                if (pontuação >= 3) {
                    alert(`Parabéns pelo o resultado. Sua pontuação é: ${userScore}`);
                } else {
                    alert(`Parabéns por tentar! Continue se esforçando. Sua pontuação é: ${userScore}`);
                }
            }
        }
    };
    

    function showQuestions(index) {
        const questionText = document.querySelector('.question-text');
        questionText.textContent = `${questionNumb}. ${selectedQuestions[index].question}`;
        let optionTag = `
            <div class="option"><span>${selectedQuestions[index].options[0]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[1]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[2]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[3]}</span></div>`;
        optionList.innerHTML = optionTag;

        const option = document.querySelectorAll('.option');
        for (let i = 0; i < option.length; i++) {
            option[i].addEventListener('click', () => {
                optionSelected(option[i]);
            });
        }

        nextBtn.classList.remove('active');
    }

    function questionCounter(index) {
        const questionTotal = document.querySelector('.question-total');
        questionTotal.textContent = `${index} de ${selectedQuestions.length} Questões`;
    }

    function headerScore() {
        const headerScoreText = document.querySelector('.header-score');
        headerScoreText.textContent = `PONTOS: ${userScore} / 5`;
    }

    function optionSelected(answer) {
        let userAnswer = answer.textContent;
        let correctAnswer = selectedQuestions[questionCount].answer;
        let allOptions = optionList.children.length;

        optionSelectedFlag = true;

        if (userAnswer == correctAnswer) {
            answer.classList.add('correct');
            userScore += 1;
            headerScore();
        } else {
            answer.classList.add('incorrect');
            for (let i = 0; i < allOptions; i++) {
                if (optionList.children[i].textContent == correctAnswer) {
                    optionList.children[i].setAttribute('class', 'option correct');
                }
            }
        }
        for (let i = 0; i < allOptions; i++) {
            optionList.children[i].classList.add('disabled');
            optionList.children[i].classList.add('no-pointer');
            optionList.children[i].removeEventListener('click', optionSelected);
        }
        nextBtn.classList.add('active');
    }

    const url = "index.html";

    function openInNewTab(url) {
        const win = window.open(url, '_blank');
        win.focus();
    }

    pontuaçãoBtn.addEventListener('click', () => {
        openInNewTab(url);
    });

    novamenteBtn.addEventListener('click', () => {
        initializeQuiz();
        pontuaçãoBtn.classList.remove('active');
        novamenteBtn.classList.remove('active');
        resultBox.classList.remove('active');
        quizSection.classList.add('active');
    });

    initializeQuiz();
});
