let questions = [
    {
        numb: 1,
        question: "Qual é a fórmula molecular da água?",
        answer: "A. H2O",
        options: [
            "A. H2O",
            "B. CO2",
            "C. O2",
            "D. H2O2"
        ]
    },
    {
        numb: 2,
        question: "Qual é o elemento químico representado pelo símbolo 'Na'?",
        answer: "B. Sódio",
        options: [
            "A. Nitrogênio",
            "B. Sódio",
            "C. Nióbio",
            "D. Neônio"
        ]
    },
    {
        numb: 3,
        question: "Qual dos seguintes ácidos é encontrado no suco gástrico humano?",
        answer: "C. Ácido clorídrico",
        options: [
            "A. Ácido acético",
            "B. Ácido sulfúrico",
            "C. Ácido clorídrico",
            "D. Ácido fosfórico"
        ]
    },
    {
        numb: 4,
        question: "Qual é o número atômico do oxigênio?",
        answer: "C. 8",
        options: [
            "A. 6",
            "B. 7",
            "C. 8",
            "D. 9"
        ]
    },
    {
        numb: 5,
        question: "Qual é o nome da reação química que envolve a adição de água para quebrar uma molécula?",
        answer: "B. Hidrólise",
        options: [
            "A. Desidratação",
            "B. Hidrólise",
            "C. Condensação",
            "D. Polimerização"
        ]
    },
    {
        numb: 6,
        question: "Qual é o composto principal no gás natural?",
        answer: "A. Metano",
        options: [
            "A. Metano",
            "B. Etano",
            "C. Propano",
            "D. Butano"
        ]
    },
    {
        numb: 7,
        question: "Qual é o estado físico do nitrogênio à temperatura ambiente?",
        answer: "C. Gasoso",
        options: [
            "A. Sólido",
            "B. Líquido",
            "C. Gasoso",
            "D. Plasma"
        ]
    },
    {
        numb: 8,
        question: "Qual destes compostos é um álcool?",
        answer: "B. Metanol",
        options: [
            "A. Metano",
            "B. Metanol",
            "C. Metanoato de sódio",
            "D. Metilamina"
        ]
    },
    {
        numb: 9,
        question: "Qual dos seguintes metais é mais reativo com água?",
        answer: "C. Sódio",
        options: [
            "A. Cobre",
            "B. Ferro",
            "C. Sódio",
            "D. Ouro"
        ]
    },
    {
        numb: 10,
        question: "Qual é a fórmula do cloreto de sódio?",
        answer: "A. NaCl",
        options: [
            "A. NaCl",
            "B. Na2O",
            "C. NaOH",
            "D. Na2CO3"
        ]
    },
    {
        numb: 11,
        question: "Qual é a unidade de medida da quantidade de substância no Sistema Internacional?",
        answer: "A. Mol",
        options: [
            "A. Mol",
            "B. Grama",
            "C. Litro",
            "D. Metro"
        ]
    },
    {
        numb: 12,
        question: "Qual é o nome do processo pelo qual as plantas produzem glicose e oxigênio a partir de dióxido de carbono e água?",
        answer: "C. Fotossíntese",
        options: [
            "A. Fermentação",
            "B. Respiração",
            "C. Fotossíntese",
            "D. Transpiração"
        ]
    },
    {
        numb: 13,
        question: "Qual destes elementos é um gás nobre?",
        answer: "B. Hélio",
        options: [
            "A. Hidrogênio",
            "B. Hélio",
            "C. Nitrogênio",
            "D. Oxigênio"
        ]
    },
    {
        numb: 14,
        question: "Qual é o número de prótons no núcleo de um átomo de carbono-12?",
        answer: "B. 6",
        options: [
            "A. 4",
            "B. 6",
            "C. 8",
            "D. 12"
        ]
    },
    {
        numb: 15,
        question: "Qual é a fórmula química do ácido sulfúrico?",
        answer: "C. H2SO4",
        options: [
            "A. H2SO3",
            "B. H2S",
            "C. H2SO4",
            "D. H2O"
        ]
    },
    {
        numb: 16,
        question: "O que é uma ligação covalente?",
        answer: "B. Compartilhamento de elétrons entre átomos",
        options: [
            "A. Transferência de elétrons entre átomos",
            "B. Compartilhamento de elétrons entre átomos",
            "C. Atração entre íons positivos e negativos",
            "D. Interação entre dipolos"
        ]
    },
    {
        numb: 17,
        question: "Qual é a substância pura que pode ser decomposta em duas substâncias mais simples por eletrólise?",
        answer: "B. Água",
        options: [
            "A. Cloreto de sódio",
            "B. Água",
            "C. Oxigênio",
            "D. Carbono"
        ]
    },
    {
        numb: 18,
        question: "Qual dos seguintes compostos é iônico?",
        answer: "C. NaCl",
        options: [
            "A. CO2",
            "B. H2O",
            "C. NaCl",
            "D. CH4"
        ]
    },
    {
        numb: 19,
        question: "Qual é o nome da partícula subatômica com carga positiva encontrada no núcleo de um átomo?",
        answer: "C. Protão",
        options: [
            "A. Elétron",
            "B. Nêutron",
            "C. Protão",
            "D. Fóton"
        ]
    },
    {
        numb: 20,
        question: "Qual é o nome do elemento com o símbolo 'K'?",
        answer: "B. Potássio",
        options: [
            "A. Cálcio",
            "B. Potássio",
            "C. Crômio",
            "D. Cobre"
        ]
    },
    {
        numb: 21,
        question: "Qual é a principal diferença entre uma mistura homogênea e uma mistura heterogênea?",
        answer: "C. Homogênea é uniformemente distribuída",
        options: [
            "A. Homogênea tem duas ou mais fases distintas",
            "B. Heterogênea é uniformemente distribuída",
            "C. Homogênea é uniformemente distribuída",
            "D. Heterogênea tem apenas uma fase"
        ]
    },
    {
        numb: 22,
        question: "Qual é o nome do processo de separação de misturas que utiliza a diferença no ponto de ebulição dos componentes?",
        answer: "C. Destilação",
        options: [
            "A. Filtração",
            "B. Decantação",
            "C. Destilação",
            "D. Centrifugação"
        ]
    },
    {
        numb: 23,
        question: "Qual dos seguintes compostos é um ácido forte?",
        answer: "A. HCl",
        options: [
            "A. HCl",
            "B. CH3COOH",
            "C. NH3",
            "D. H2CO3"
        ]
    },
    {
        numb: 24,
        question: "Qual é o principal componente do ar atmosférico?",
        answer: "C. Nitrogênio",
        options: [
            "A. Oxigênio",
            "B. Gás carbônico",
            "C. Nitrogênio",
            "D. Argônio"
        ]
    },
    {
        numb: 25,
        question: "Qual é a massa molar do dióxido de carbono (CO2)?",
        answer: "B. 44 g/mol",
        options: [
            "A. 28 g/mol",
            "B. 44 g/mol",
            "C. 32 g/mol",
            "D. 18 g/mol"
        ]
    }
];


let selectedQuestions = [];
let questionCount = 0;
let userScore = 0;
let optionSelectedFlag = false;

document.addEventListener('DOMContentLoaded', function() {
    let nextBtn = document.querySelector('.next-btn');
    let optionList = document.querySelector('.option-list');
    let pontuaçãoBtn = document.querySelector('.Pontuação-btn');
    let novamenteBtn = document.querySelector('.Novamente-btn');
    let questionNumb = 1;

    // Função para sortear 5 perguntas aleatórias
    function getRandomQuestions() {
        let shuffled = questions.sort(() => 0.25 - Math.random());
        return shuffled.slice(0, 5);
    }

    // Inicializa o quiz com 5 perguntas aleatórias
    function initializeQuiz() {
        selectedQuestions = getRandomQuestions();
        userScore = 0;
        questionCount = 0;
        questionNumb = 1;
        headerScore();
        showQuestions(questionCount);
        questionCounter(questionNumb);
    }


    nextBtn.onclick = () => {
        if (optionSelectedFlag) {
            if (questionCount < selectedQuestions.length - 1) {
                questionCount++;
                questionNumb++;
                showQuestions(questionCount);
                questionCounter(questionNumb);
                optionSelectedFlag = false;
            } else {
                console.log('Question Completed');
                pontuaçãoBtn.classList.add('active');
                nextBtn.classList.remove('active');
                novamenteBtn.classList.add('active');
    
                // Adicionando a funcionalidade do alerta aqui
                var pontuação = userScore; // Supondo que pontuaçãoBtn seja a pontuação do quiz
                if (pontuação >= 3) {
                    alert(`Parabéns pelo o resultado. Sua pontuação é: ${userScore}`);
                } else {
                    alert(`Parabéns por tentar! Continue se esforçando. Sua pontuação é: ${userScore}`);
                }
            }
        }
    };
    

    function showQuestions(index) {
        const questionText = document.querySelector('.question-text');
        questionText.textContent = `${questionNumb}. ${selectedQuestions[index].question}`;
        let optionTag = `
            <div class="option"><span>${selectedQuestions[index].options[0]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[1]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[2]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[3]}</span></div>`;
        optionList.innerHTML = optionTag;

        const option = document.querySelectorAll('.option');
        for (let i = 0; i < option.length; i++) {
            option[i].addEventListener('click', () => {
                optionSelected(option[i]);
            });
        }

        nextBtn.classList.remove('active');
    }

    function questionCounter(index) {
        const questionTotal = document.querySelector('.question-total');
        questionTotal.textContent = `${index} de ${selectedQuestions.length} Questões`;
    }

    function headerScore() {
        const headerScoreText = document.querySelector('.header-score');
        headerScoreText.textContent = `PONTOS: ${userScore} / 5`;
    }

    function optionSelected(answer) {
        let userAnswer = answer.textContent;
        let correctAnswer = selectedQuestions[questionCount].answer;
        let allOptions = optionList.children.length;

        optionSelectedFlag = true;

        if (userAnswer == correctAnswer) {
            answer.classList.add('correct');
            userScore += 1;
            headerScore();
        } else {
            answer.classList.add('incorrect');
            for (let i = 0; i < allOptions; i++) {
                if (optionList.children[i].textContent == correctAnswer) {
                    optionList.children[i].setAttribute('class', 'option correct');
                }
            }
        }
        for (let i = 0; i < allOptions; i++) {
            optionList.children[i].classList.add('disabled');
            optionList.children[i].classList.add('no-pointer');
            optionList.children[i].removeEventListener('click', optionSelected);
        }
        nextBtn.classList.add('active');
    }

    const url = "index.html";

    function openInNewTab(url) {
        const win = window.open(url, '_blank');
        win.focus();
    }

    pontuaçãoBtn.addEventListener('click', () => {
        openInNewTab(url);
    });

    novamenteBtn.addEventListener('click', () => {
        initializeQuiz();
        pontuaçãoBtn.classList.remove('active');
        novamenteBtn.classList.remove('active');
        resultBox.classList.remove('active');
        quizSection.classList.add('active');
    });

    initializeQuiz();
});
