let questions = [
    {
        numb: 1,
        question: "Uma loja vende um produto por R$150,00. Se o desconto oferecido é de 20%, quanto o cliente pagará pelo produto?",
        answer: "B. R$120,00",
        options: [
            "A. R$110,00",
            "B. R$120,00",
            "C. R$125,00",
            "D. R$130,00"
        ]
    },
    {
        numb: 2,
        question: "João comprou 4 cadernos que custam R$5,50 cada. Quanto ele pagou ao todo?",
        answer: "B. R$22,00",
        options: [
            "A. R$20,00",
            "B. R$22,00",
            "C. R$23,00",
            "D. R$24,00"
        ]
    },
    {
        numb: 3,
        question: "Uma caixa contém 24 latas de refrigerante. Se 8 latas forem retiradas, quantas latas restarão na caixa?",
        answer: "C. 16",
        options: [
            "A. 12",
            "B. 14",
            "C. 16",
            "D. 18"
        ]
    },
    {
        numb: 4,
        question: "Um carro percorre 60 km com 4 litros de combustível. Quantos litros serão necessários para percorrer 150 km?",
        answer: "A. 10 litros",
        options: [
            "A. 10 litros",
            "B. 12 litros",
            "C. 15 litros",
            "D. 18 litros"
        ]
    },
    {
        numb: 5,
        question: "Ana comprou uma blusa por R$80,00 com um desconto de 25%. Qual foi o valor do desconto?",
        answer: "B. R$20,00",
        options: [
            "A. R$15,00",
            "B. R$20,00",
            "C. R$25,00",
            "D. R$30,00"
        ]
    },
    {
        numb: 6,
        question: "Um trabalhador recebe R$120,00 por dia. Quanto ele receberá ao final de uma semana de 5 dias de trabalho?",
        answer: "C. R$600,00",
        options: [
            "A. R$500,00",
            "B. R$550,00",
            "C. R$600,00",
            "D. R$650,00"
        ]
    },
    {
        numb: 7,
        question: "Se 3 livros custam R$45,00, qual é o custo de 5 livros?",
        answer: "B. R$75,00",
        options: [
            "A. R$70,00",
            "B. R$75,00",
            "C. R$80,00",
            "D. R$85,00"
        ]
    },
    {
        numb: 8,
        question: "Uma camiseta custa R$50,00. Se houver um aumento de 10%, qual será o novo preço da camiseta?",
        answer: "B. R$55,00",
        options: [
            "A. R$52,00",
            "B. R$55,00",
            "C. R$57,00",
            "D. R$60,00"
        ]
    },
    {
        numb: 9,
        question: "Um tanque de água tem capacidade para 500 litros, mas está apenas 60% cheio. Quantos litros de água há no tanque?",
        answer: "D. 300 litros",
        options: [
            "A. 250 litros",
            "B. 400 litros",
            "C. 350 litros",
            "D. 300 litros"
        ]
    },
    {
        numb: 10,
        question: "Em uma turma de 40 alunos, 30% são meninas. Quantas meninas há na turma?",
        answer: " B. 12",
        options: [
            "A. 10",
            "B. 12",
            "C. 15",
            "D. 18"
        ]
    },
    {
        numb: 11,
        question: "Uma loja vende um par de sapatos por R$90,00 e oferece um desconto de 10%. Quanto o cliente pagará?",
        answer: "C. R$81,00",
        options: [
            "A. R$75,00",
            "B. R$80,00",
            "C. R$81,00",
            "D. R$85,00"
        ]
    },
    {
        numb: 12,
        question: "Carlos comprou 3 camisetas por R$25,00 cada e um boné por R$15,00. Quanto ele gastou no total?",
        answer: "D. R$90,00",
        options: [
            "A. R$75,00",
            "B. R$80,00",
            "C. R$85,00",
            "D. R$90,00"
        ]
    },
    {
        numb: 13,
        question: "Se um pacote com 12 canetas custa R$36,00, qual é o preço de cada caneta?",
        answer: "B. R$3,00",
        options: [
            "A. R$2,00",
            "B. R$3,00",
            "C. R$4,00",
            "D. R$5,00"
        ]
    },
    {
        numb: 14,
        question: "Um produto custa R$250,00 e foi dividido em 5 parcelas iguais. Qual é o valor de cada parcela?",
        answer: "C. R$50,00",
        options: [
            "A. R$40,00",
            "B. R$45,00",
            "C. R$50,00",
            "D. R$55,00"
        ]
    },
    {
        numb: 15,
        question: "Se um livro custa R$60,00 e há um desconto de 15%, qual será o valor final do livro?",
        answer: "C. R$51,00",
        options: [
            "A. R$45,00",
            "B. R$48,00",
            "C. R$51,00",
            "D. R$54,00"
        ]
    },
    {
        numb: 16,
        question: "Joana comprou 5 caixas de lápis, cada uma com 10 lápis. Quantos lápis ela comprou no total?",
        answer: "C. 50",
        options: [
            "A. 40",
            "B. 45",
            "C. 50",
            "D. 55"
        ]
    },
    {
        numb: 17,
        question: "Em um restaurante, a conta total foi de R$200,00. Se o garçom recebeu uma gorjeta de 10%, qual foi o valor da gorjeta?",
        answer: "C. R$20,00",
        options: [
            "A. R$15,00",
            "B. R$18,00",
            "C. R$20,00",
            "D. R$25,00"
        ]
    },
    {
        numb: 18,
        question: "Uma bicicleta custava R$400,00, mas está com 25% de desconto. Quanto custa a bicicleta com o desconto?",
        answer: "B. R$300,00",
        options: [
            "A. R$280,00",
            "B. R$300,00",
            "C. R$320,00",
            "D. R$350,00"
        ]
    },
    {
        numb: 19,
        question: "Uma escola tem 500 alunos. Se 60% são meninos, quantos meninos há na escola?",
        answer: "C. 300",
        options: [
            "A. 250",
            "B. 275",
            "C. 300",
            "D. 350"
        ]
    },
    {
        numb: 20,
        question: "Paulo comprou uma TV por R$1.200,00 em 10 parcelas iguais. Quanto ele pagará em cada parcela?",
        answer: "B. R$120,00",
        options: [
            "A. R$110,00",
            "B. R$120,00",
            "C. R$125,00",
            "D. R$130,00"
        ]
    },
    {
        numb: 21,
        question: "Um hotel cobra R$150,00 por diária. Quanto uma pessoa pagará por 7 diárias?",
        answer: "D. R$1.050,00",
        options: [
            "A. R$900,00",
            "B. R$950,00",
            "C. R$1.000,00",
            "D. R$1.050,00"
        ]
    },
    {
        numb: 22,
        question: "Um ingresso de cinema custa R$25,00. Se uma família comprar 4 ingressos, quanto pagará ao todo?",
        answer: "D. R$100,00",
        options: [
            "A. R$80,00",
            "B. R$90,00",
            "C. R$95,00",
            "D. R$100,00"
        ]
    },
    {
        numb: 23,
        question: "Uma calça custa R$120,00 e está com 30% de desconto. Qual é o novo preço da calça?",
        answer: "B. R$84,00",
        options: [
            "A. R$80,00",
            "B. R$84,00",
            "C. R$90,00",
            "D. R$95,00"
        ]
    },
    {
        numb: 24,
        question: "Uma caixa tem 36 bombons. Se forem distribuídos igualmente entre 9 pessoas, quantos bombons cada pessoa receberá?",
        answer: "B. 4",
        options: [
            "A. 3",
            "B. 4",
            "C. 5",
            "D. 6"
        ]
    },
    {
        numb: 25,
        question: "Mariana quer comprar 3 brinquedos que custam R$40,00 cada. Se ela tem um cupom de desconto de 20%, quanto ela pagará no total?",
        answer: "B. R$96,00",
        options: [
            "A. R$90,00",
            "B. R$96,00",
            "C. R$100,00",
            "D. R$108,00"
        ]
    }
];

let selectedQuestions = [];
let questionCount = 0;
let userScore = 0;
let optionSelectedFlag = false;

document.addEventListener('DOMContentLoaded', function() {
    let nextBtn = document.querySelector('.next-btn');
    let optionList = document.querySelector('.option-list');
    let pontuaçãoBtn = document.querySelector('.Pontuação-btn');
    let novamenteBtn = document.querySelector('.Novamente-btn');
    let questionNumb = 1;

    // Função para sortear 5 perguntas aleatórias
    function getRandomQuestions() {
        let shuffled = questions.sort(() => 0.25 - Math.random());
        return shuffled.slice(0, 5);
    }

    // Inicializa o quiz com 5 perguntas aleatórias
    function initializeQuiz() {
        selectedQuestions = getRandomQuestions();
        userScore = 0;
        questionCount = 0;
        questionNumb = 1;
        headerScore();
        showQuestions(questionCount);
        questionCounter(questionNumb);
    }

    nextBtn.onclick = () => {
        if (optionSelectedFlag) {
            if (questionCount < selectedQuestions.length - 1) {
                questionCount++;
                questionNumb++;
                showQuestions(questionCount);
                questionCounter(questionNumb);
                optionSelectedFlag = false;
            } else {
                console.log('Question Completed');
                pontuaçãoBtn.classList.add('active');
                nextBtn.classList.remove('active');
                novamenteBtn.classList.add('active');
    
                // Adicionando a funcionalidade do alerta aqui
                var pontuação = userScore; // Supondo que pontuaçãoBtn seja a pontuação do quiz
                if (pontuação >= 3) {
                    alert(`Parabéns pelo o resultado. Sua pontuação é: ${userScore}`);
                } else {
                    alert(`Parabéns por tentar! Continue se esforçando. Sua pontuação é: ${userScore}`);
                }
            }
        }
    };
    

    function showQuestions(index) {
        const questionText = document.querySelector('.question-text');
        questionText.textContent = `${questionNumb}. ${selectedQuestions[index].question}`;
        let optionTag = `
            <div class="option"><span>${selectedQuestions[index].options[0]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[1]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[2]}</span></div>
            <div class="option"><span>${selectedQuestions[index].options[3]}</span></div>`;
        optionList.innerHTML = optionTag;

        const option = document.querySelectorAll('.option');
        for (let i = 0; i < option.length; i++) {
            option[i].addEventListener('click', () => {
                optionSelected(option[i]);
            });
        }

        nextBtn.classList.remove('active');
    }

    function questionCounter(index) {
        const questionTotal = document.querySelector('.question-total');
        questionTotal.textContent = `${index} de ${selectedQuestions.length} Questões`;
    }

    function headerScore() {
        const headerScoreText = document.querySelector('.header-score');
        headerScoreText.textContent = `PONTOS: ${userScore} / 5`;
    }

    function optionSelected(answer) {
        let userAnswer = answer.textContent;
        let correctAnswer = selectedQuestions[questionCount].answer;
        let allOptions = optionList.children.length;

        optionSelectedFlag = true;

        if (userAnswer == correctAnswer) {
            answer.classList.add('correct');
            userScore += 1;
            headerScore();
        } else {
            answer.classList.add('incorrect');
            for (let i = 0; i < allOptions; i++) {
                if (optionList.children[i].textContent == correctAnswer) {
                    optionList.children[i].setAttribute('class', 'option correct');
                }
            }
        }
        for (let i = 0; i < allOptions; i++) {
            optionList.children[i].classList.add('disabled');
            optionList.children[i].classList.add('no-pointer');
            optionList.children[i].removeEventListener('click', optionSelected);
        }
        nextBtn.classList.add('active');
    }

    const url = "index.html";

    function openInNewTab(url) {
        const win = window.open(url, '_blank');
        win.focus();
    }

    pontuaçãoBtn.addEventListener('click', () => {
        openInNewTab(url);
    });

    novamenteBtn.addEventListener('click', () => {
        initializeQuiz();
        pontuaçãoBtn.classList.remove('active');
        novamenteBtn.classList.remove('active');
        resultBox.classList.remove('active');
        quizSection.classList.add('active');
    });

    initializeQuiz();
});
